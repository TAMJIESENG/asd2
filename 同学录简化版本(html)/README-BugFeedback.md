# 同学录系统 - Bug反馈功能说明

## 功能概述

本系统新增了完整的Bug反馈功能，包括前端反馈界面和后台接收服务，用户可以方便地提交问题报告和功能建议。

## 文件结构

```
同学录简化版本(html)/
├── index-html.html          # 主页面（已添加Bug反馈功能）
├── bug-feedback-server.js   # Bug反馈后台服务器
├── package.json            # Node.js依赖配置
├── bug-reports/            # Bug报告存储目录（自动创建）
└── README-BugFeedback.md   # 本说明文件
```

## 安装和启动

### 1. 安装依赖

```bash
# 在项目目录下执行
npm install
```

### 2. 启动后台服务器

```bash
# 启动Bug反馈服务器
npm start

# 或者使用开发模式（自动重启）
npm run dev
```

### 3. 访问系统

- 前端页面：直接打开 `index-html.html`
- 后台服务：`http://localhost:3001`

## 功能特性

### 前端功能

1. **Bug反馈按钮**
   - 位置：导航栏右侧
   - 图标：🐛 Bug反馈
   - 点击打开反馈模态框

2. **反馈表单**
   - 问题类型：程序错误、界面问题、性能问题、功能建议、其他问题
   - 严重程度：轻微、中等、严重、紧急
   - 问题标题：必填，最多100字符
   - 详细描述：必填，最多1000字符
   - 联系方式：可选，邮箱地址
   - 系统信息：可选，自动收集浏览器和系统信息

3. **智能功能**
   - 已登录用户自动填入邮箱
   - 表单验证和错误提示
   - 提交状态显示
   - 网络异常时本地保存

### 后台功能

1. **API接口**
   - `POST /api/bug-report` - 提交Bug报告
   - `GET /api/bug-reports` - 获取所有Bug报告
   - `GET /api/bug-report/:id` - 获取单个Bug报告
   - `PUT /api/bug-report/:id/status` - 更新Bug状态

2. **数据存储**
   - 每个Bug报告保存为独立的JSON文件
   - 自动生成唯一ID
   - 维护报告列表索引
   - 支持状态管理（open, in-progress, resolved, closed）

3. **系统信息收集**
   - 浏览器信息
   - 屏幕分辨率
   - 时间戳
   - 页面URL
   - 用户信息

## 使用流程

### 用户提交Bug报告

1. 点击导航栏的"Bug反馈"按钮
2. 填写反馈表单：
   - 选择问题类型和严重程度
   - 填写问题标题和详细描述
   - 可选填写联系邮箱
   - 选择是否包含系统信息
3. 点击"提交反馈"按钮
4. 系统显示提交结果

### 管理员查看Bug报告

1. 查看 `bug-reports/` 目录下的JSON文件
2. 使用API接口获取报告列表
3. 通过API更新Bug处理状态

## 错误处理

### 网络异常
- 当后台服务器不可用时，Bug报告会保存到浏览器本地存储
- 用户会收到相应提示信息
- 管理员可以稍后从本地存储中导出数据

### 表单验证
- 必填字段验证
- 字符长度限制
- 邮箱格式验证
- 实时错误提示

## 安全考虑

1. **输入验证**
   - 服务器端验证所有输入数据
   - 防止XSS和注入攻击
   - 限制文件大小和数量

2. **CORS配置**
   - 允许跨域请求
   - 可根据需要限制来源域名

3. **数据保护**
   - 敏感信息过滤
   - 用户隐私保护
   - 数据备份建议

## 扩展功能

### 可选增强

1. **邮件通知**
   - 新Bug报告邮件提醒
   - 状态更新通知

2. **管理界面**
   - Web管理后台
   - Bug报告统计
   - 批量处理功能

3. **文件上传**
   - 截图上传
   - 日志文件附件

4. **数据库存储**
   - 替换文件存储
   - 更好的查询性能

## 故障排除

### 常见问题

1. **服务器启动失败**
   - 检查端口3001是否被占用
   - 确认Node.js版本 >= 14.0.0
   - 检查依赖是否正确安装

2. **前端无法提交**
   - 确认后台服务器正在运行
   - 检查浏览器控制台错误信息
   - 验证网络连接

3. **Bug报告丢失**
   - 检查 `bug-reports/` 目录权限
   - 查看服务器日志
   - 检查本地存储中的备份数据

### 日志查看

- 服务器日志：控制台输出
- 前端日志：浏览器开发者工具控制台
- Bug报告：`bug-reports/` 目录

## 技术栈

- **前端**：HTML5, CSS3, JavaScript, Bootstrap 5
- **后端**：Node.js, Express.js
- **存储**：JSON文件系统
- **通信**：RESTful API, Fetch API

## 版本信息

- 版本：1.0.0
- 更新日期：2024年
- 兼容性：现代浏览器，Node.js 14+

---

如有问题或建议，请通过Bug反馈系统提交或联系开发团队。